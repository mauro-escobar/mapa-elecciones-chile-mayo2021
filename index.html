<!DOCTYPE html>
<html>
<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-P434JDW7CB"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'G-P434JDW7CB');
	</script>

    <meta charset='utf-8' />
    <title>Elecciones Chile 05/2021</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" href="css/style.css">
    <link rel="shortcut icon" href="favicon.ico">
</head>

<body>
	<div id='menu'>
		<span id="menu-title" >Elecciones Chile 2021 | 15 y 16 de mayo </span>
		<div class="container dropdown" onclick="desplegarMenu(this)">
			&#9660;
			<div class="dropdown-content">
				<a class="a-dropdown" href="actual.html">Mapa político actual</a><br>
			</div>
		</div>
		<span id="menu-author" class="desktop">(by <a href="https://mauro-escobar.github.io" target="_blank" style="margin-left:0px;">Mauro Escobar</a>)</span>
		<span class="mobile"><br></span>
		<span class="desktop" style="margin-left:50px"></span>
		<a class="a-menu" id="a-distritos" onClick="mostrarDistritos()" style="color:black">Distritos</a><span class="mobile sep">|</span>
		<a class="a-menu"  id="a-participacion" onClick="mostrarParticipacion()">Participación</a><span class="mobile sep">|</span>
		<a class="a-menu"  id="a-convencionales" onClick="mostrarConvencionales()">Convencionales</a>
		<a class="a-menu"  id="a-convencionalesMH" onClick="mostrarConvencionalesMH()" style="margin-left:2px">(Votos M/H)</a><span class="mobile sep">|</span>
		<a class="a-menu"  id="a-gobernadores" onClick="mostrarGobernadores()">Gobernadores</a><span class="mobile sep">|</span>
		<a class="a-menu"  id="a-alcaldes" onClick="mostrarAlcaldes()">Alcaldes</a><span class="mobile sep">|</span>
		<a class="a-menu"  id="a-concejales" onClick="mostrarConcejales()">Concejales</a>
		<a class="a-menu"  id="a-concejalesMH" onClick="mostrarConcejalesMH()" style="margin-left:2px">(Votos M/H)</a>
	</div>
    <div id='map'></div>
    <div class='map-overlay' id='legend' style='display:none'></div>
    <div class='map-overlay2' id='legend2' style='display:none'></div>
    <script type='text/javascript' src="js/global.js"></script>
    <script type='text/javascript' src="js/parliament-plot.js"></script>
    <script type='text/javascript' src="js/el-municipales-2021.js"></script>
    <script type='text/javascript' src="js/el-gobernadores-2021.js"></script>
    <script type='text/javascript' src="js/el-convencionales-2021.js"></script>
    <script type='text/javascript' src="js/map_2021-05.js"></script>
    <script>
    	function desplegarMenu(x) {
    		x.classList.toggle("change");
    	}
    	function touchParliamentSeat(evt) {
    		var svgobj=evt.target; 
    		if (svgobj.dataset.hasOwnProperty("party") && svgobj.dataset.party!='Candidaturas-Independientes') {
    			var party = svgobj.dataset.party;	
    			var els = document.getElementsByClassName(party);
    			var count = els.length;
    			for (var i =0; i < els.length; i++) {
    				els[i].style.opacity=0.3;
    				if (els[i].dataset.hasOwnProperty("dotted")) count--;
    			}
    			if (count==1) var escanos = count + " escaño";
    			else var escanos = count + " escaños";
	    		var span = document.getElementById('lista-seat');
	    		if (span) span.innerHTML = '<span style="font-weight:bold">'+party.replace(/-/g," ")+":</span> "+escanos+'<br>';
    		} else {
    			svgobj.style.opacity=0.3;	
    		}
    		var span = document.getElementById('nombre-seat');
    		if (span) span.innerHTML = '<span>'+svgobj.dataset.name+'</span>';
    	}
    	function unTouchParliamentSeat(evt) {
    		var svgobj=evt.target; 
    		if (svgobj.dataset.hasOwnProperty("party") && svgobj.dataset.party!='Candidaturas-Independientes') {
    			var party = svgobj.dataset.party;	
    			var els = document.getElementsByClassName(party);
    			for (var i =0; i < els.length; i++) {
    				els[i].style.opacity=1;
	    		var span = document.getElementById('lista-seat');
	    		if (span) span.innerHTML = '<br>';
    			}
    		} else {
    			svgobj.style.opacity=1;	
    		}
    		var span = document.getElementById('nombre-seat');
    		if (span) span.innerHTML = 'Muévete sobre los puntos...';
    	}
    </script>
</body>

</html>
